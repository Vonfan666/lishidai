<!DOCTYPE html>
<html lang="en">
<head>
    {% load staticfiles %}
    <meta charset="UTF-8">
    <title>接口测试平台</title>
    <script src="{% static 'js/jquery-3.1.1.js' %}"></script>
    <link  href="{% static 'plugins/bootstrap/css/bootstrap.css' %}" type="text/css">
    <script src="{% static 'plugins/bootstrap/js/bootstrap.js' %}"></script>
    <link rel="stylesheet" href="{% static 'plugins/ALicon/iconfont.css' %}" type="text/css">
    <script src="{% static 'plugins/ALicon/iconfont.js' %}"></script>
    <link rel="stylesheet" href="{% static 'css/home.css' %}">
    <link rel="stylesheet" href="{% static 'css/main-css.css' %}">
</head>

<body>
<div class="all">
    <div  class="left">
        <div class="left-all">
            <div class="left-one">
                <dl>
                    <dt> 项目列表 <span></span></dt>
                </dl>
            </div>

            <div class="left-one">
                <dl>
                    <dt> 接口文档 <span></span></dt>
                </dl>
            </div>
            <div class="left-one">
                <dl>
                    <dt> 变量管理 <span></span></dt>
                    <dd>环境变量</dd>
                    <dd>全局变量</dd>
                </dl>

            </div>
            <div class="left-one">
                <dl>
                    <dt> SQL管理 <span></span></dt>
                    <dd>环境变量</dd>
                    <dd>全局变量</dd>
                </dl>

            </div>
            <div class="left-one">
                <dl>
                    <dt> 用例管理 <span></span></dt>
                </dl>

            </div>
            <div class="left-one">
                <dl>
                    <dt> 环境管理 <span></span></dt>
                </dl>

            </div>
            <div class="left-one">
                <dl>
                    <dt> 定时任务 <span></span></dt>
                </dl>

            </div>
            <div class="left-one">
                <dl>
                    <dt> 权限管理 <span></span></dt>
                </dl>
            </div>
        </div>
    </div>

    <div class="right">
        <div class="right-head">
            <div class="right-head-1">
                <div class="right-head-1-left">
                    <span class="openLeft icon iconfont icon-icon-test5" value="1"></span>
                </div>
                <div class="right-head-1-right">
                    <div class="icon iconfont icon-icon-test1 userSetting">

                    </div>

                    <div class="userName"></div>
                    <div class="userImage"></div>
                    <div class="userSetting-div" >
                        <span>修改密码</span>
                        <span>修改头像</span>
                        <span class="back-login">退出登录</span>
                    </div>
                </div>




            </div>
        </div>
        {% block varible %}
        <div class="projectListName">
            <p>项目列表</p>
        </div>
        {% endblock %}
        {% block viewPro %}
        <div class="rightListSearch">
            <div class="inp">
                <form class="fm" action="#" method="GET">
                    <div class="el-input">
                        <input type="text" placeholder="请输入名称" >
                        <span class="active icon iconfont icon-cross "></span>
                    </div>


                </form>
            </div>
            <div class="inp-button">
                        <input  type="button" value="搜索">
                        <input type="button" value="新增" onclick="addprojectSelectVarible()">
            </div>

            <div class="GlobleVariable">

                <input  type="button" value="查看环境">
                <input type="button" value="新增环境">

            </div>

            <div class="project-add active" value="0">
            </div>
            <div class="project-add-1 active">
                <div class="project-add-1-1">
                </div>
                <div class="project-add-1-2">
                    <div class="project-add-1-2">
                        <form class="fm-project-add">
                                <p>项目名称：<input type="text" placeholder="必填" name="proName"></p>
                                <p>项目版本：<input type="text" placeholder="必填" name="proHost"></p>
                                <p>测试环境：
                                    <select class="addProjectSelect" name="proVarible">




                                    </select>
                                </p>

                        </form>
                        <div class="project-add-1-bottom">
                            <span class="project-add-1-false click-bottom">取消</span>
                            <span class="project-add-1-true click-bottom">确定</span>
                        </div>
                    </div>

                </div>
            </div>
            <div class="project-add-11 active">
                <div class="project-add-1-1">
                </div>
                 <div class="project-add-1-2">
                    <div class="project-add-1-2">
                        <form class="fm-project-add">
                                <p>环境名称：<input type="text" placeholder="必填" name="proName"></p>
                                <p> key&#12288 &#12288：<input type="text" placeholder="必填 例如：url(英文别名)" name="prokey"></p>
                                <p>环境地址：<input type="text" placeholder="必填 例：http://192.160.0.1:8080/" name="proattr"></p>

                        </form>
                        <div class="project-add-1-bottom">
                            <span class="project-add-1-false click-bottom">取消</span>
                            <span class="project-add-1-true click-bottom">确定</span>
                        </div>
                    </div>

                </div>
            </div>

        </div>
        {% endblock %}
        {% block  lsdvarible %}
        <div class="rightList">
            <table class="rightList-table"  cellspacing="0"  cellpadding="0"  >
                <thead>
                    <tr>
                        <th>项目编号</th>
                        <th>项目名称</th>
                        <th>项目版本</th>
                        <th>测试环境</th>
                        <th>执行人员</th>
                        <th>执行时间</th>
                        <th>操作</th>

                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1008611</td>
                        <td>立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代立时代</td>
                        <td>192.168.0.1</td>
                        <td>8090</td>
                        <td>test</td>
                        <td>2019-07-01 23:30:59</td>
                        <td><span>编辑</span> | <span>删除</span> |  <span>执行</span></td>
                    </tr>
                </tbody>
                <tbody>
                    <tr>
                        <td>1008611</td>
                        <td>立时代</td>
                        <td>192.168.0.1</td>
                        <td>8090</td>
                        <td>test</td>
                        <td>2019-07-01 23:30:59</td>
                        <td><span>编辑</span> | <span>删除</span> |  <span>执行</span></td>
                    </tr>
                </tbody>
                <tbody>
                    <tr>
                        <td>1008611</td>
                        <td>立时代</td>
                        <td>192.168.0.1</td>
                        <td>8090</td>
                        <td>test</td>
                        <td>2019-07-01 23:30:59</td>
                        <td><span>编辑</span> | <span>删除</span> |  <span>执行</span></td>
                    </tr>
                </tbody>
                <tbody>
                    <tr>
                        <td>1008611</td>
                        <td>立时代</td>
                        <td>192.168.0.1</td>
                        <td>8090</td>
                        <td>test</td>
                        <td>2019-07-01 23:30:59</td>
                        <td><span>编辑</span> | <span>删除</span> |  <span>执行</span></td>
                    </tr>
                </tbody>
                <tbody>
                    <tr>
                        <td>1008611</td>
                        <td>立时代</td>
                        <td>192.168.0.1</td>
                        <td>8090</td>
                        <td>test</td>
                        <td>2019-07-01 23:30:59</td>
                        <td><span>编辑</span> | <span>删除</span> |  <span>执行</span></td>
                    </tr>
                </tbody>
                <tbody>
                    <tr>
                        <td>1008611</td>
                        <td>立时代</td>
                        <td>192.168.0.1</td>
                        <td>8090</td>
                        <td>test</td>
                        <td>2019-07-01 23:30:59</td>
                        <td><span>编辑</span> | <span>删除</span> |  <span>执行</span></td>
                    </tr>
                </tbody>
                <tbody>
                    <tr>
                        <td>1008611</td>
                        <td>立时代</td>
                        <td>192.168.0.1</td>
                        <td>8090</td>
                        <td>test</td>
                        <td>2019-07-01 23:30:59</td>
                        <td><span>编辑</span> | <span>删除</span> |  <span>执行</span></td>
                    </tr>
                </tbody>

            </table>
        </div>
        {% endblock %}
    </div>
</div>


</body >
<script src="{% static 'js/login-js.js' %}"></script>
<script src="{% static 'js/home.js' %}"></script>
<script src="{% static 'js/main-js.js' %}"></script>
<script>
    $(function () {
        acceptInp(".el-input input");
        removeInp(".el-input .icon",".el-input input");
        userName();
    });
{#        userSetting(".right-head-1-right",".userSetting-div")#}
{#$(".userSetting-div").children().eq(3).click(function () {#}
{#        console.log(2222222)#}
{#    });#}
$(".back-login").click(function () {
    console.log(1111);
    $.ajax({
        "url":"{% url 'backLogin' %}",
        "type":"POST",
        "dataType":"json",
        success:function (arg) {
            console.log(arg);
            console.log(arg.status);
            if (arg.status=="200"){

                window.location.href='{% url "login" %}'}
        }

    })
});

//新增环境
$(".project-add-11 .project-add-1-bottom").children().eq(1).click(function () {
    $.ajax({
        "url":"{% url 'addLsdvarible' %}",
        "type":"POST",
        "dataType":"JSON",
        "data":$(".project-add-11 .fm-project-add").serialize(),
        success:function (arg) {
            backPop(".project-add-11");
            toast(arg.msg);
            cleanToast();


            console.log(arg)
        }

    })
});

    //查看环境
    $('.GlobleVariable').children().eq(0).click(function () {
{#        $.ajax({#}
{#            "url":'{% url "lsdvarible" %}',#}
{#            "type":"GET",#}
{#            "dataType":"JSON",#}
{#            success:function (arg) {#}
{#               if  (arg.status==200){#}
                    window.location.href='{% url "lsdvarible" %}';
{#                   window.open("lsdvarible.html")#}
{##}
{#                }#}
{#            }#}
{##}
{#        })#}
    })
//新增项目 获取所有环境名称


   function addprojectSelectVarible() {
      console.log(11111);
        $.ajax({
            "url":"{% url 'lsdvarible' %}",
            "type":"POST",
            "dataType":"JSON",
            success:function (arg) {
                console.log(arg.list.length);
                var  data=arg.list;
                var selectOptionCode=$('.addProjectSelect');
                selectOptionCode.append(' <option value="0" selected>请选择测试环境</option>');
                for  (i=0;i<data.length;i++){
                    console.log(data[i]);
                    selectOptionCode.append("<option></option>").children().eq(i+1).html(data[i].vbname).val(data[i].id)
                }

            }
        })
    };


    $(".project-add-1 .project-add-1-true").click(function () {
        var selectOptionCode=$('.project-add-1 .fm-project-add');
        $.ajax({
            "url":"{% url 'addProject' %}",
            "type":"POST",
            "dataType":"JSON",
            "data":selectOptionCode.serialize(),
            success:function (arg) {
                backPop(".project-add-1");
                toast(arg.msg);
                cleanToast();
            }
        })
    })











</script>

{% block script %}
    <script>
            $(".left-one").eq(0).css("background-color", "#434a50")
            $(".left-one").eq(0).siblings().css("background-color","#545c64")
    </script>
{% endblock %}


</html>